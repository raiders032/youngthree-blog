---
title: "Redis Pub/Sub vs Kafka: 메시징 시스템 비교 분석"
description: "Redis의 Pub/Sub 시스템과 Kafka의 핵심 특징을 비교 분석합니다. 각 시스템의 장단점, 사용 사례, 그리고 실제 구현 시 고려해야 할 점들을 상세히 다룹니다. 메시징 시스템 선택에 고민이 있는 개발자들을 위한 가이드입니다."
tags: [ "REDIS", "KAFKA", "MESSAGE_QUEUE", "PUBSUB", "DISTRIBUTED_SYSTEM", "BACKEND", "INFRASTRUCTURE" ]
keywords: [ "레디스", "redis", "카프카", "kafka", "펍섭", "발행구독", "pub/sub", "publish subscribe", "메시지큐", "message queue", "메시징시스템", "messaging system", "분산시스템", "distributed system" ]
draft: false
hide_title: true
---

## 1. Redis Pub/Sub 이해하기

- Redis의 Pub/Sub 시스템은 메시지를 발행(publish)하고 구독(subscribe)하는 간단하면서도 효율적인 메시징 패턴을 제공합니다.
- Publish/Subscribe messaging 시스템에서 publisher는 특정 subscriber에게 직접 메시지를 전송하도록 프로그래밍되지 않습니다.
	- [MessageSystem 참고](../MessageSystem/MessageSystem.md)
- 대신, 발행된 메시지는 채널로 분류되며, 어떤 구독자가 있는지 (혹은 있는지조차) 알 필요가 없습니다.
- 구독자들은 하나 이상의 채널에 관심을 표현하고, 어떤 발행자가 있는지 알 필요 없이 관심 있는 메시지만 수신합니다.
- 이러한 발행자와 구독자의 분리(decoupling)는 더 나은 확장성과 유연한 네트워크 토폴로지를 가능하게 합니다.-

### 1.1 기본 동작 원리

- 발행자(Publisher)는 특정 채널에 메시지를 발행합니다.
- 구독자(Subscriber)는 관심 있는 채널을 구독하여 메시지를 수신합니다.
	- 구독자는 채널에 발행된 순서대로 메시지를 수신합니다.
- 발행자와 구독자는 서로에 대해 알 필요가 없으며, 채널을 통해 느슨하게 결합됩니다.

**Redis Pub/Sub 예시**

```redis
# 구독자 측
SUBSCRIBE channel1 channel2

# 발행자 측
PUBLISH channel1 "Hello World"
```

- 구독자가 `channel1`과 `channel2`를 구독합니다.
- 발행자가 `channel1`에 "Hello World" 메시지를 발행합니다.
- 구독자는 `channel1`을 구독하고 있으므로 해당 메시지를 수신합니다.

### 1.2 주요 특징

- At-most-once 메시지 전달 보장
- 실시간 메시지 처리
	- 메모리 기반의 빠른 처리 속도
	- 최소한의 지연시간
- 채널 기반의 단순한 구조
	- 직관적인 발행/구독 모델
	- 간단한 구현과 관리
- 패턴 매칭 구독 지원
	- glob-style 패턴 사용 가능 (e.g., news.*, user.*)
	- 유연한 채널 구독 관리
- Redis 7.0의 향상된 기능
	- 샤딩 지원으로 수평적 확장 가능
	- 클러스터 모드에서의 효율적인 메시지 전파

## 2. 메시지 전달 신뢰성

- Redis Pub/Sub은 at-most-once 메시지 전달 방식을 사용합니다.
- 이는 메시지가 최대 한 번만 전달되며, 서버가 메시지를 보낸 후에는 재전송되지 않는다는 것을 의미합니다.
- 구독자가 메시지를 처리하지 못하는 경우에는 해당 메시지가 영구적으로 손실됩니다.
	- 네트워크 단절, 구독자 다운 등의 상황에서 메시지 손실 가능성이 있습니다.

:::warning[신뢰성 고려사항]
더 강력한 메시지 전달 보장이 필요한 애플리케이션의 경우, Redis Streams를 고려해볼 수 있습니다. Streams는 메시지를 영속적으로 저장하며, 'at-most-once'와 'at-least-once'
전달 방식을 모두 지원합니다.
:::

## 3. Kafka와의 비교 분석

### 3.1 메시지 영속성

- Redis Pub/Sub
	- 메시지 영속성 없음
	- 메시지 전달 즉시 메시지 삭제합니다.
    -  Redis 서버가 구독자들에게 메시지를 보내고 더 이상 신경 쓰지 않는 방식(fire-and-forget 방식)
  - 구독자가 온라인일 때만 메시지를 받을 수 있음. 오프라인 상태에서는 메시지를 완전히 놓침(at-most-once 전달)
- Kafka
	- 메시지 영속성 보장
	- 설정된 보관 기간 동안 메시지 유지
	- 오프라인 구독자도 나중에 메시지 수신 가능

### 3.2 확장성과 성능

- Redis Pub/Sub
	- 단순한 구조로 빠른 처리 속도
	- Redis 7.0부터 샤딩으로 수평적 확장 가능
	- 메모리 기반 처리로 높은 처리량
- Kafka
	- 파티션 기반 분산 처리
	- 높은 처리량과 안정적인 확장성
	- 복잡한 설정과 관리 필요

### 3.3 사용 사례 비교

#### Redis Pub/Sub 적합 사례

- 실시간 채팅 애플리케이션
- 실시간 알림 시스템
- 간단한 이벤트 브로드캐스팅
- 낮은 지연시간이 필요한 실시간 데이터 스트리밍

#### Kafka 적합 사례

- 대규모 로그 수집 및 처리
- 이벤트 소싱 아키텍처
- 데이터 파이프라인 구축
- 장기간 데이터 보관이 필요한 시스템

## 4. 구현 시 고려사항

### 4.1 Redis Pub/Sub 구현 시 주의점

:::warning[주의사항]

- 구독자가 오프라인일 때 메시지 유실 가능성
- 메시지 전달 보장이 필요한 경우 추가적인 방어 로직 필요
- 네트워크 단절 시 재연결 처리 구현 필요
  :::

### 4.2 시스템 선택 가이드

- Redis Pub/Sub 선택 기준
	- 실시간성이 중요한 경우
	- 간단한 메시징 구조가 필요한 경우
	- 메모리 기반의 빠른 처리가 필요한 경우
	- 영속성이 크게 중요하지 않은 경우
- Kafka 선택 기준
	- 메시지 영속성이 필요한 경우
	- 대용량 데이터 처리가 필요한 경우
	- 복잡한 이벤트 처리가 필요한 경우
	- 장애 복구와 고가용성이 중요한 경우

## 5. 결론

- Redis Pub/Sub과 Kafka는 각각의 장단점과 적합한 사용 사례가 있습니다.
- Redis Pub/Sub은 실시간성과 단순성이 장점이며, Kafka는 안정성과 확장성이 뛰어납니다.
- 시스템 요구사항을 잘 분석하여 적절한 메시징 시스템을 선택하는 것이 중요합니다.

:::tip[선택 팁]
실시간 처리가 중요하고 메시지 영속성이 필요없다면 Redis Pub/Sub을,
대용량 데이터 처리와 메시지 영속성이 필요하다면 Kafka를 선택하세요.
:::
~~## 1. Load Testing

## 2. 부하 테스트의 목적

- 부하 테스트는 시스템 처리 능력을 계산하여 가용성을 높이는 것이다.
- 온프레미스의 테스트 목적
	- 여러 사례를 토대로 각 시스템의 응답 성능을 측정한다.
	- 부하가 많이 발생할 때 성능을 개선한다.
	- 우너하는 성능을 만드는데 필요한 하드웨어를 미리 선정한다.

## 3. 부하 테스트에서의 시스템 성능 지표

### 3.1 Throughput

- 시스템이 단위 시간당 처리할 수 있는 요청의 수를 의미합니다.
- HTTP 요청수를 기준으로 많이 하며 그것을 RTS(Requests per Second)라고 합니다.

### 3.2 Latency

- 시스템이 요청을 처리하는데 걸리는 시간을 의미합니다.
- Latency는 보는 입장에 따라 다르게 해석될 수 있습니다.
	- 사용자 입장: 사용자 요청을 보내고 응답을 받을 때까지의 시간
	- 시스템 입장: 웹 시스템이 요청을 받고 응답을 줄 때까지의 시간
	- 전자의 경우 네트웤크를 통한 왕복 시간이 포함되지만, 후자의 경우는 서버에서 처리하는 시간만을 의미합니다.

### 3.3 여러 하위 시스템으로 구성된 환경

- 시스템의 성능을 측정할 때는 시스템을 구성하는 여러 하위 시스템의 성능을 측정해야 합니다.
	- 각 하위 시스템의 성능이 전체 시스템의 성능에 영향을 미치기 때문입니다.
- 시스템 전체 Throughput은 각 하위 시스템 Throughput 중 가장 낮은 값으로 결정됩니다.
- 시스템 전체 Latency는 각 하위 시스템 Latency의 합으로 결정됩니다.~~


## 4. 시스템 성능 개선

### 4.1 Throughput 개선

- 웹 시스템은 각 하위 시스템이 순차적으로 작업을 처리하는 시스템입니다.
- 가장 Throughput이 낮은 하위 시스템이 전체 시스템의 Throughput을 결정합니다.
- 여기서 가장 Throughput이 낮은 시스템을 Bottleneck(병목 구간)이라고 합니다.
- 즉 병목을 찾아 개선해서 전체 시스템의 Throughput을 높이는 것이 중요합니다.
- 그리고 하나의 병목을 개선하면 다른 쪽으로 이동된 병목을 찾아 개선해야 합니다.
- 만약 병목이 아닌 시스템을 개선하면 시스템 전체 성능은 개선되지 않습니다.
  - 최악의 경우 병목이 아닌 시스템을 개선하면 병목이 되는 시스템의 성능이 더 떨어질 수 있습니다.
  - 따라서 Throughput 개선을 위해서는 병목을 정확히 찾는 것이 중요합니다.

### 4.2 Latency 개선

- Latency는 **대기 시간을 포함한 각 하위 시스템 처리 시간의 총합**입니다.
  - 여기서 중요한 점이 대기 시간입니다.Throughput이 한계에 도달하면 대기 시간이 길어지고 Latency가 증가합니다.
  - Throughput은 Latency와 긴밀한 관계가 있으며 Throughput을 개선하면 Latency가 개선되는 경우가 많습니다.
- Latency을 개선하기 위해서는 각 하위 시스템 중에 Latency가 높은 시스템을 순차적으로 개선해야 합니다.
- 각 하위 시스템의 Latency가 적정한 범위 내에 있다면 더 이상 개선하는 것이 어려울 수 있습니다.
- 처리 시간 개선에서 개선 대상은 개발된 애플리케이션입니다. 아래와 같은 원인이 있 수 있습니다.
  - 비효율적인 알고리즘
  - 필요 없는 I/O
  - 데이터베이스의 인덱스 부족 등
- Latency는 애플리케이션 내부라면 프로파일러라는 도구를 사용하면 비교적 쉽게 파악할 수 있습니다.

## 5. 좋은 부하 테스트에 대한 지표

- 테스트 대상 시스템은 부하가 집중되고 있는 상태
  - 부하 테스트란 말 그대로 테스트 대상 시스템에 부하르 중 상태에서 실행하는 테스트입니다.
  - 부하 테스트 중 특정 하드웨어 리소스가 과부하 상태가 되는 것은 나쁜 것이 아니라 좋은 부하 테스트가 진행 중임을 의미합니다.
  - 부하 테스트 대상 시스템 이외 부분에 부하가 집중되고 실제 부하가 필요한 시스템에는 부하가 없다면 나쁜 부하 테스트에 대한 지표입니다.
- 병목 지점을 확인한 상태
  - 부하 테스트의 경우 시스템 어느 한 부분이 과부하 상태가 되어 이 부분이 전체 Throughput을 결정하게 됩니다.
  - 부하 테스트 중에는 항상 테스트의 병목 구간이 어디인지를 의식하고 확인해야 합니다.
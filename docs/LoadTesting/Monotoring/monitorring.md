---
title: "부하 테스트와 함께하는 시스템 모니터링과 프로파일링 가이드"
description: "부하 테스트를 진행하면서 효과적으로 시스템을 모니터링하고 프로파일링하는 방법을 알아봅니다. Throughput과 Latency 분석부터 AWS CloudWatch를 활용한 실시간 모니터링까지, 실전적인 시스템 분석 방법을 다룹니다."
tags: ["MONITORING", "AWS", "PERFORMANCE_TEST", "PROFILING", "DEVOPS", "SYSTEM_ADMIN"]
keywords: ["부하 테스트", "시스템 모니터링", "프로파일링", "성능 테스트", "throughput", "latency", "top", "netstat", "CloudWatch", "시스템 성능", "성능 분석", "모니터링 도구"]
draft: false
hide_title: true
---

## 1. 모니터링 도구와 프로파일링 도구

부하 테스트를 실행할 때는 Throughput 모니터링 도구와 시각화 도구가 필수적입니다. 그러나 프로파일링 도구를 활용하면 부하 테스트를 하게 되면 프로파일링 도구의 응답 시간에 영향을 주어 시스템의 실제 성능을 왜곡할 수 있습니다. 이러한 문제를 해결하기 위해 다음과 같은 접근 방식이 필요합니다.

### 1.1 주요 모니터링 도구

시스템 모니터링을 위한 핵심 도구들:

- top 명령어와 netstat 명령어
- AWS 관리 콘솔
- Xhprof
- New Relic

## 2. 리소스 모니터링을 위한 top 명령어

### 2.1 top 명령어 기본 사용법

시스템을 실시간으로 모니터링하기 위한 가장 기본적인 도구인 top 명령어는 시스템 전체와 프로세스별 CPU와 메모리 사용량 등을 볼 수 있어 부하 테스트 시에 유용하게 사용됩니다.

```bash
$ top
top - 03:17:50 up 197 days, 18:54, 1 user, load average: 0.00, 0.00, 0.00
Tasks: 234 total, 1 running, 233 sleeping, 0 stopped, 0 zombie
Cpu(s): 0.2%us, 0.2%sy, 0.0%ni, 99.7%id, 0.0%wa, 0.0%hi, 0.0%si, 0.0%st
Mem: 4049868k total, 2470912k used, 1578956k free, 104832k buffers
```

### 2.2 CPU 사용률 분석

- **사용자 프로세스 CPU 사용률(us)**: 0.2%us는 '사용자 프로세스 CPU 사용률(0.2%)'을 의미
- **시스템 프로세스 CPU 사용률(sy)**: 0.2%sy는 '시스템 프로세스 CPU 사용률(0.2%)'을 의미
- **유휴 CPU 비율(id)**: 시스템의 여유 자원을 나타냄

### 2.3 메모리 사용량 모니터링

- **전체 메모리**: 4049868k total
- **사용 중인 메모리**: 2470912k used
- **가용 메모리**: 1578956k free
- **버퍼/캐시**: 시스템 성능 향상을 위한 버퍼와 캐시 메모리

## 3. 네트워크 모니터링을 위한 netstat

### 3.1 netstat 명령어 활용

netstat 명령어는 TCP 등 네트워크 통신 상태를 볼 수 있는 핵심 도구입니다.

```bash
$ netstat -nato
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address    Foreign Address    State    Timer
tcp   0      0      0.0.0.0:22      0.0.0.0:*         LISTEN   off (0.00/0/0)
tcp   0      224    10.0.0.40:22    153.156.43.25:63515 ESTABLISHED on
```

### 3.2 TCP 연결 상태 분석

부하 테스트 시에 확인할 주요 상태:
- ESTABLISHED: 현재 연결된 상태
- TIME_WAIT: TCP 연결 종료 대기 상태
- LISTEN: 연결 요청 대기 상태

## 4. AWS CloudWatch를 활용한 통합 모니터링

### 4.1 CloudWatch 기본 설정

네트워크 Latency를 포함하지 않는 시스템 처리 Latency를 확인하기 위해서는 로드 밸런서 모니터링이 필요합니다.

### 4.2 주요 모니터링 지표

| 대상 클래스 | 대상 | 종류 | 기간 | 그래프 지표 | 비고 |
|------------|------|------|------|-------------|------|
| ELB | RequestCount | 평균 | 1분 | 정상 기능 확인 | 우선순위 그래프 |
| ELB | Latency | 평균 | 5분 | 5분간 평균 Latency | 기간이 늘어나도 적정 |
| EC2 | CPUUtilization | 합계 | 1분 | CPU 사용량 | 평균 1분값 검증 |

### 4.3 CloudWatch 그래프 작성 시 주의사항

:::warning
- 평균값과 함께 한계값 그래프도 표시
- Latency는 평균이 아닌 절대값으로 확인
- CPU 사용량은 100% 기준으로 모니터링
  :::

## 5. 프로파일링 도구 활용 전략

### 5.1 프로파일링 시 고려사항

부하 테스트와 프로파일링을 동시에 진행할 때는:

- 필요한 구간만 선별적으로 프로파일링
- 전체 시스템 성능에 미치는 영향 최소화
- 주기적인 샘플링을 통한 데이터 수집

### 5.2 모니터링 데이터 분석

:::tip
효과적인 데이터 분석을 위한 팁:
1. 베이스라인 측정 결과와 비교 분석
2. 부하 증가에 따른 지표 변화 추적
3. 병목 구간 식별 및 원인 분석
4. 시스템 리소스와 성능 지표 연계 분석
   :::

## 6. 결론

부하 테스트 시 모니터링과 프로파일링은 상호 보완적인 관계입니다. 각 도구의 특성을 이해하고 적절히 활용하여 시스템의 성능을 정확하게 측정하고 개선점을 도출하는 것이 중요합니다.
## 1 EBS Volume Resizing: A Comprehensive Guide

- Amazon Elastic Block Store (EBS) 볼륨은 AWS EC2 인스턴스에 사용되는 블록 수준의 영구 스토리지입니다.
- EBS 볼륨의 크기를 조정하는 것은 스토리지 관리에 있어 중요한 작업입니다.
- 이 가이드에서는 EBS 볼륨 크기 조정에 대한 모든 것을 자세히 설명합니다.



## 2 EBS 볼륨 크기 증가의 기본 사항

- EBS 볼륨의 크기는 증가시킬 수 있지만, 감소시킬 수는 없습니다.
- 모든 유형의 EBS 볼륨(gp2, gp3, io1, io2, st1, sc1)에 대해 크기를 증가시킬 수 있습니다.
- 크기 증가는 볼륨이 EC2 인스턴스에 연결된 상태에서도 수행할 수 있습니다.
- 볼륨 크기를 증가시킨 후에는 운영 체제 수준에서 파티션을 재조정해야 합니다.



## 3 IOPS 조정

- IOPS(Input/Output Operations Per Second)는 io1과 io2 유형의 EBS 볼륨에서만 조정할 수 있습니다.
- IOPS를 증가시키면 볼륨의 성능을 향상시킬 수 있습니다.
- gp2, gp3, st1, sc1 유형의 볼륨은 IOPS를 직접 조정할 수 없으며, 볼륨 크기에 따라 IOPS가 자동으로 결정됩니다.



## 4 EBS 볼륨 크기 조정 과정

### 4.1 AWS Management Console을 통한 크기 조정

1. AWS Management Console에 로그인합니다.
2. EC2 대시보드로 이동합니다.
3. 왼쪽 메뉴에서 "Volumes"를 선택합니다.
4. 크기를 조정할 볼륨을 선택합니다.
5. "Actions" 드롭다운 메뉴에서 "Modify Volume"을 선택합니다.
6. 새로운 크기를 입력하고 "Modify"를 클릭합니다.



### 4.2 AWS CLI를 통한 크기 조정

**AWS CLI를 사용한 볼륨 크기 조정 예시**

```bash
aws ec2 modify-volume --volume-id vol-1234567890abcdef0 --size 200
```

- 이 명령은 볼륨 ID가 'vol-1234567890abcdef0'인 EBS 볼륨의 크기를 200GB로 조정합니다.



## 5 파티션 재조정

- EBS 볼륨의 크기를 증가시킨 후에는 운영 체제 수준에서 파티션을 재조정해야 합니다.
- 파티션 재조정 과정은 운영 체제에 따라 다릅니다.



### 5.1 Linux에서의 파티션 재조정

- [레퍼런스](https://docs.aws.amazon.com/ebs/latest/userguide/recognize-expanded-volume-linux.html)



**파티션 정보 확인**

```bash
lsblk
```



**파티션 재조정 (예: /dev/xvda1 파티션)**

```bash
sudo growpart /dev/xvda 1
sudo resize2fs /dev/xvda1
```

- `growpart` 명령은 파티션 테이블을 업데이트합니다.
- `resize2fs` 명령은 파일 시스템을 새로운 크기로 확장합니다.



### 5.2 Windows에서의 파티션 재조정

1. 디스크 관리 도구를 엽니다 (diskmgmt.msc).
2. 확장된 볼륨을 오른쪽 클릭하고 "Extend Volume"을 선택합니다.
3. 화면의 지시를 따라 볼륨을 확장합니다.



## 6 최적화 단계

- EBS 볼륨의 크기를 증가시킨 후, 볼륨이 "최적화" 단계에 들어갈 수 있습니다.
- 이 단계는 상당히 오래 지속될 수 있지만, 이 기간 동안에도 볼륨은 정상적으로 사용할 수 있습니다.
- 최적화 단계에서는 볼륨의 성능이 일시적으로 저하될 수 있습니다.
- 최적화가 완료되면 볼륨은 정상적인 성능을 발휘하게 됩니다.



## 7 EBS 볼륨 크기 감소

- EBS 볼륨의 크기를 직접 감소시키는 것은 불가능합니다.
- 볼륨 크기를 줄이고 싶다면, 다음과 같은 방법을 사용할 수 있습니다:
	1. 새로운 작은 크기의 EBS 볼륨을 생성합니다.
	2. 기존 볼륨의 데이터를 새 볼륨으로 마이그레이션합니다.
	3. 새 볼륨을 EC2 인스턴스에 연결하고 기존 볼륨을 분리합니다.
- 이 과정은 데이터 손실의 위험이 있으므로 반드시 데이터를 백업한 후 진행해야 합니다.



## 8 결론

- EBS 볼륨 크기 조정은 AWS에서 스토리지를 관리하는 중요한 기술입니다.
- 볼륨 크기는 증가만 가능하며, 감소는 불가능합니다.
- 크기 조정 후에는 반드시 운영 체제 수준에서 파티션을 재조정해야 합니다.
- 최적화 단계가 길어질 수 있지만, 이 기간 동안에도 볼륨은 사용 가능합니다.
- 볼륨 크기를 줄이려면 새로운 볼륨을 생성하고 데이터를 마이그레이션해야 합니다.
- EBS 볼륨 관리에 대한 이해는 AWS 환경에서의 효율적인 리소스 관리에 필수적입니다.
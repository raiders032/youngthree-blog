## 1 EC2 인스턴스의 상태 확인(Status Checks)

- EC2 인스턴스의 상태 확인은 하드웨어 및 소프트웨어 문제를 식별하기 위한 자동화된 검사입니다.
- 이 기능은 인스턴스의 안정성과 가용성을 보장하는 데 중요한 역할을 합니다.
- AWS는 두 가지 유형의 상태 확인을 제공합니다
	- 시스템 상태 확인
	- 인스턴스 상태 확인



**예시**

![[Pasted image 20240905101312.png]]



## 2 시스템 상태 확인(System Status Checks)

- 시스템 상태 확인은 AWS 시스템과 관련된 문제를 모니터링합니다.
- 이는 EC2 인스턴스가 실행되는 물리적 호스트의 문제를 감지합니다.
- 주로 다음과 같은 문제를 식별합니다:
	- 물리적 호스트의 소프트웨어/하드웨어 문제
	- 시스템 전원 손실
	- 네트워크 연결 문제
- AWS에서 예정된 중요 유지보수가 있는 경우, Personal Health Dashboard를 확인해야 합니다.
- 이 대시보드에서 인스턴스 호스트에 대한 유지보수 일정을 확인할 수 있습니다.
- 시스템 상태 확인 실패 시 해결 방법:
	- AWS가 호스트를 수정할 때까지 기다립니다.
	- EC2 인스턴스를 새로운 호스트로 이동합니다.
		-  인스턴스를 중지하고 시작 (EBS 기반인 경우)



## 3 인스턴스 상태 확인(Instance Status Checks)

- 인스턴스 상태 확인은 개별 EC2 인스턴스의 소프트웨어 및 네트워크 구성을 모니터링합니다.
- 주로 다음과 같은 문제를 감지합니다
	- 잘못된 네트워크 구성
	- 메모리 부족
	- 손상된 파일 시스템
	- 호환되지 않는 커널
- 인스턴스 상태 확인 실패 시 해결 방법
	- 인스턴스를 재부팅합니다.
	- 인스턴스 구성을 변경합니다.



## 4 CloudWatch를 이용한 상태 확인 모니터링

- AWS CloudWatch는 EC2 인스턴스의 상태를 모니터링하는 강력한 도구입니다.
- CloudWatch는 다음과 같은 메트릭을 1분 간격으로 제공합니다:
	- StatusCheckFailed_System
	- StatusCheckFailed_Instance
	- StatusCheckFailed (둘 다에 대한 종합 메트릭)



## 5 자동 복구 옵션

- CloudWatch 알람을 사용하여 인스턴스 상태 확인 실패 시 자동 복구를 구성할 수 있습니다.
- 두 가지 주요 옵션이 있습니다:



### 5.1 옵션 1: CloudWatch 알람

![[Pasted image 20240905101407.png]]
![[Pasted image 20240905101452.png]]
- EC2 인스턴스를 동일한 프라이빗/퍼블릭 IP, EIP, 메타데이터, 배치 그룹으로 복구합니다.
- SNS를 사용하여 알림을 보냅니다.



### 5.2 옵션 2: Auto Scaling 그룹

- 최소/최대/원하는 용량을 1로 설정하여 인스턴스를 복구합니다.
- 단, 이 방법은 동일한 프라이빗 및 탄력적 IP를 유지하지 않습니다.



## 6 결론

- EC2 인스턴스의 상태 확인은 안정적인 클라우드 인프라 운영에 필수적입니다.
- 시스템 및 인스턴스 상태 확인을 통해 다양한 문제를 조기에 발견하고 해결할 수 있습니다.
- CloudWatch와 연계하여 자동 복구 메커니즘을 구축하면 서비스의 가용성을 크게 향상시킬 수 있습니다.
- 정기적인 모니터링과 적절한 대응 전략 수립이 중요합니다.
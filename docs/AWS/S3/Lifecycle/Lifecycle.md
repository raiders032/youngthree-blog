## 1 AWS S3 Lifecycle Policy

- Amazon S3는 사용자가 대용량 데이터를 효율적으로 저장하고 관리할 수 있도록 다양한 기능을 제공합니다. 
- 그중 S3 Lifecycle Policy는 데이터의 수명 주기를 관리하여 비용을 절감하고 스토리지를 최적화할 수 있는 강력한 도구입니다. 
- 이 정책은 객체의 저장 상태를 자동으로 전환하거나 삭제하여 스토리지 비용을 줄일 수 있도록 설계되었습니다.



### 1.1 S3 Lifecycle Policy의 주요 특징

- **자동화된 데이터 관리**
    - S3 Lifecycle Policy를 사용하면 데이터의 수명 주기를 자동으로 관리할 수 있습니다.
    - 예를 들어, 일정 기간이 지난 후 특정 데이터 세트를 덜 비싼 스토리지 클래스로 이동하거나 자동으로 삭제할 수 있습니다.
- **비용 최적화**
    - 자주 액세스하지 않는 데이터를 저비용 스토리지 클래스로 자동으로 이동시킴으로써 저장 비용을 줄일 수 있습니다.
- **다양한 스토리지 클래스 지원**
    - S3 Standard, S3 Intelligent-Tiering, S3 Standard-IA, S3 One Zone-IA, S3 Glacier 및 S3 Glacier Deep Archive와 같은 다양한 스토리지 클래스를 지원하여 유연한 데이터 관리가 가능합니다.



## 2 S3 Lifecycle Policy 설정

- S3 Lifecycle Policy는 기본적으로 여러 규칙을 포함할 수 있으며, 각 규칙은 특정 객체에 대해 수행될 작업을 정의합니다. 
- 이러한 규칙은 객체의 나이, 태그, 프리픽스 등에 따라 다르게 설정될 수 있습니다.



### 2.1 규칙 구성 요소

- **Prefix**
	- 정책이 적용될 객체의 경로를 지정합니다. 
	- 예를 들어, 특정 디렉토리나 파일 형식에 대한 정책을 설정할 수 있습니다. 
	- 예: `s3://mybucket/mp3/*` 
-  **Tag**:
	- 특정 태그를 가진 객체에 대해 정책을 설정할 수 있습니다. 
	- 예: `Department:Finance` 
- **Transition Actions**
	- 객체를 다른 스토리지 클래스로 전환하는 작업을 정의합니다.
	- 예시
		- 생성 후 60일이 지난 객체를 Standard-IA 클래스로 이동
		- 6개월 후에 객체를 Glacier로 아카이브
- **Expiration Actions**
	- 일정 기간이 지난 후 객체를 만료(삭제)시키는 작업을 정의합니다.\
	- 예시
		- 접근 로그 파일을 365일 후에 삭제
		- 버전 관리가 활성화된 경우, 오래된 버전을 삭제하는 데 사용 
		- 완료되지 않은 다중 파트 업로드를 삭제하는 데 사용



### 2.2 예시 정책

- **자주 액세스하지 않는 데이터의 이동**
    - 예시: 객체가 30일 동안 사용되지 않은 경우 S3 Standard에서 S3 Standard-IA로 이동하고, 90일 후에는 S3 Glacier로 이동하도록 설정.
- **데이터 삭제**
    - 예시: 객체가 1년 동안 사용되지 않은 경우 자동으로 삭제하도록 설정.



### 2.3 설정 방법

1. **S3 콘솔로 이동**: AWS Management Console에서 S3 서비스를 선택합니다.
2. **버킷 선택**: Lifecycle Policy를 설정할 버킷을 선택합니다.
3. **관리(Management) 탭 선택**: 해당 버킷의 관리 탭으로 이동합니다.
4. **라이프사이클 규칙 추가(Add lifecycle rule)**: 라이프사이클 규칙을 추가합니다.
5. **규칙 설정**: 규칙 이름을 지정하고, 정책이 적용될 객체의 조건(Prefix, Tag)을 설정합니다.
6. **Transition 및 Expiration 설정**: 객체의 이동과 만료 규칙을 정의합니다.
7. **저장(Save)**: 설정을 저장하여 정책을 활성화합니다.



## 3 최적화 전략

- **저비용 스토리지 클래스로의 이동**
    - 자주 액세스하지 않는 데이터를 S3 Standard-IA, S3 One Zone-IA, 또는 S3 Glacier와 같은 저비용 스토리지 클래스로 이동시켜 비용을 절감할 수 있습니다.
- **데이터 수명 주기 관리**
    - 비즈니스 요구 사항에 따라 데이터를 자동으로 삭제하여 스토리지 비용을 관리하고 최적화할 수 있습니다.



**참고 자료**

- [Amazon S3 Lifecycle Management](https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lifecycle-mgmt.html)
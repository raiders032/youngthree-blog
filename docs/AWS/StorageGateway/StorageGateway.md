## 1 AWS Storage Gateway

- AWS Storage Gateway는 하이브리드 클라우드 스토리지 솔루션으로, 온프레미스와 클라우드 간의 원활한 데이터 전송과 관리 기능을 제공합니다.
- 이를 통해 사용자는 데이터 백업, 아카이브, 재해 복구, 데이터 마이그레이션 등의 다양한 시나리오에서 클라우드의 장점을 활용할 수 있습니다.
- Storage Gateway는 온프레미스 애플리케이션과 AWS 클라우드 스토리지 간의 브리지 역할을 합니다.



### 1.1 기능

- **백업**: 온프레미스 데이터의 백업 및 아카이브를 지원하여 데이터 보호와 복구 시간을 단축합니다.
- **재해 복구**: 재해 시 데이터를 AWS 클라우드에서 복구하여 비즈니스 연속성을 유지합니다.
- **데이터 마이그레이션**: 온프레미스 데이터를 AWS 클라우드로 점진적으로 전환하여 비즈니스 운영에 영향을 최소화합니다.
- **하이브리드 클라우드 스토리지**: 온프레미스 애플리케이션이 AWS 클라우드 스토리지를 마치 로컬 스토리지처럼 사용할 수 있게 합니다.



### 1.2 종류

- **Amazon S3 File Gateway**: 파일 기반의 애플리케이션에서 S3를 대상으로 파일을 저장할 수 있습니다. (오브젝트 스토리지)
- **Amazon FSx File Gateway**: 온프레미스와 Amazon FSx 파일 시스템 간에 파일 데이터를 관리합니다. (파일 스토리지)
- **Tape Gateway**: 기존 백업 테이프 인프라를 클라우드로 확장합니다. (오브젝트 스토리지)
- **Volume Gateway**: iSCSI 디스크 볼륨을 제공하여 블록 수준의 데이터 저장을 지원합니다. (블록 스토리지)



### 1.3 하드웨어 어플라이언스

- Storage Gateway 하드웨어 어플라이언스는 물리적 장치로, 온프레미스 환경에서 클라우드 스토리지와의 통합을 쉽게 할 수 있게 합니다.
- 이를 통해 File Gateway, Volume Gateway, Tape Gateway 기능을 쉽게 활용할 수 있습니다.
- 하드웨어 어플라이언스는 설치와 구성이 간편하여 클라우드 통합 시간을 단축시킬 수 있습니다.



## 2 Amazon S3 File Gateway

- Amazon S3 File Gateway는 온프레미스 애플리케이션에서 NFS 및 SMB 프로토콜을 통해 Amazon S3에 파일을 저장하고 관리할 수 있도록 합니다.
- 이는 주로 오브젝트 스토리지를 기반으로 하며, 데이터를 캐시하고 여러 스토리지 클래스를 지원합니다.
- 파일 기반 애플리케이션과 워크플로우에 적합하며, S3의 내구성과 확장성을 활용할 수 있습니다.



## 3 Amazon FSx File Gateway

- Amazon FSx File Gateway는 클라우드에 있는 Amazon FSx for Windows File Server 파일 공유에 온프레미스에서 접근할 수 있는 기능을 제공합니다.
- 이 서비스는 온프레미스와 클라우드 간에 파일 데이터를 원활하게 전송하고 관리할 수 있게 해줍니다.
- **윈도우 전용**: FSx File Gateway는 현재 **Amazon FSx for Windows File Server**만 지원하며, 이 서비스는 Windows 파일 시스템에 특화된 파일 공유 및 관리 기능을 제공합니다.



### 3.1 주요 기능

- **로컬 파일 캐싱**: 자주 접근하는 파일을 온프레미스에 캐시하여 성능을 최적화합니다.
- **통합 관리**: 온프레미스와 클라우드 간의 파일 데이터를 통합적으로 관리할 수 있습니다.
- **보안 연결**: AWS Direct Connect나 VPN을 통해 안전하게 FSx for Windows File Server에 접근할 수 있습니다.



### 3.2 사용 시나리오

- **하이브리드 파일 공유**: 온프레미스 애플리케이션이 클라우드의 FSx for Windows File Server에 있는 파일을 로컬 파일처럼 사용할 수 있습니다.
- **데이터 통합 및 백업**: 온프레미스 데이터를 클라우드로 통합하거나 백업하는 데 사용할 수 있습니다.
- **비용 절감**: 온프레미스 파일 서버를 AWS 클라우드로 이전하여 비용을 절감하고 클라우드 스토리지의 확장성과 경제성을 활용할 수 있습니다.



## 4 Volume Gateway

- Volume Gateway는 iSCSI 인터페이스를 통해 온프레미스 서버와 연결된 블록 수준의 스토리지를 제공합니다.
- 블록 스토리지는 운영 체제나 애플리케이션이 직접 접근할 수 있는 로우 레벨 스토리지로, 데이터베이스나 파일 시스템 등에 적합합니다.
- Volume Gateway는 두 가지 모드로 운영될 수 있습니다: 캐시드 볼륨 모드와 스토어드 볼륨 모드.



### 4.1 캐시드 볼륨 모드 (Cached Volumes)

- 데이터의 주 저장소로 Amazon S3를 사용합니다.
- 자주 접근하는 데이터만 로컬에 캐시하여 저장합니다.
- 전체 데이터 세트가 S3에 저장되므로 온프레미스 스토리지 비용을 절감할 수 있습니다.
- 대용량 데이터 세트를 다루면서도 자주 접근하는 데이터에 대해 낮은 지연 시간을 제공합니다.



### 4.2 스토어드 볼륨 모드 (Stored Volumes)

- 전체 데이터 세트를 로컬에 저장하며, 비동기적으로 Amazon S3에 백업합니다.
- 모든 데이터에 대해 로컬 액세스 속도를 제공합니다.
- 데이터의 백업 및 내구성을 위해 S3를 활용합니다.
- 전체 데이터에 대한 짧은 지연 시간이 필요한 경우에 적합합니다.



### 4.3 POSIX 호환성

- Volume Gateway는 POSIX(Portable Operating System Interface) 호환 블록 스토리지를 제공합니다.
- 이는 POSIX 표준을 따르는 운영 체제 및 애플리케이션과 호환됨을 의미합니다.
- POSIX 호환성을 통해 다양한 백업 소프트웨어 및 애플리케이션과의 통합이 가능합니다.



### 4.4 주요 기능

- **스냅샷**: 볼륨의 시점 스냅샷을 생성하여 Amazon EBS 스냅샷으로 저장할 수 있습니다.
- **증분 백업**: 변경된 데이터만 백업하여 네트워크 사용량과 백업 시간을 최소화합니다.
- **재해 복구**: 스냅샷을 사용하여 전체 볼륨을 신속하게 복구할 수 있습니다.
- **데이터 마이그레이션**: 온프레미스 데이터를 점진적으로 클라우드로 이전할 수 있습니다.



## 5 Tape Gateway

- Tape Gateway는 기존 백업 소프트웨어와 통합되어 VTL(Virtual Tape Library)로 데이터를 백업하고, 이를 Amazon S3 및 Glacier로 전송합니다.
- 이는 오브젝트 스토리지 기반의 솔루션으로, 장기 보관 및 백업에 최적화되어 있습니다.
- 기존 테이프 기반 백업 프로세스를 클라우드로 쉽게 마이그레이션할 수 있게 해줍니다.



### 5.1 주요 기능

- **가상 테이프**: 물리적 테이프를 사용하지 않고 가상 테이프를 생성하여 사용합니다.
- **S3 및 Glacier 통합**: 백업 데이터를 S3와 Glacier에 저장하여 비용 효율적인 장기 보관이 가능합니다.
- **기존 백업 소프트웨어 호환**: 대부분의 주요 백업 소프트웨어와 호환되어 기존 백업 프로세스를 유지할 수 있습니다.



## 6 결론

- AWS Storage Gateway는 온프레미스 환경과 AWS 클라우드 스토리지를 원활하게 연결하는 다양한 옵션을 제공합니다.
- 각 게이트웨이 유형(File, FSx File, Volume, Tape)은 특정 사용 사례와 요구 사항에 맞게 설계되었습니다.
- 특히 Volume Gateway의 스토어드 볼륨 모드는 전체 데이터셋을 로컬에 유지하면서 POSIX 호환 블록 스토리지를 제공하여, 백업 애플리케이션의 요구 사항을 충족시킬 수 있습니다.
- 조직의 특정 요구 사항, 데이터 액세스 패턴, 성능 요구 사항 등을 고려하여 적절한 Storage Gateway 솔루션을 선택해야 합니다.
## 1 RDS와 CloudWatch 통합 소개

- Amazon RDS(Relational Database Service)는 AWS CloudWatch와 긴밀하게 통합되어 있습니다.
- 이 통합을 통해 데이터베이스 관리자는 RDS 인스턴스의 성능과 상태를 실시간으로 모니터링할 수 있습니다.
- CloudWatch는 RDS에서 다양한 메트릭을 수집하고, 이를 시각화하여 제공합니다.
- 이를 통해 데이터베이스의 성능 문제를 신속하게 파악하고 대응할 수 있습니다.



## 2 CloudWatch 기본 메트릭

- CloudWatch는 RDS 인스턴스의 하이퍼바이저로부터 다음과 같은 주요 메트릭을 수집합니다:
- **DatabaseConnections**: 
	- 데이터베이스에 대한 현재 연결 수를 나타냅니다.
	- 이를 통해 애플리케이션의 데이터베이스 사용량을 파악할 수 있습니다.
- **SwapUsage**: 
	- 데이터베이스 인스턴스가 사용 중인 스왑 공간의 양을 나타냅니다.
	- 높은 스왑 사용량은 메모리 부족을 의미할 수 있습니다.
- **ReadIOPS / WriteIOPS**: 
	- 초당 디스크 읽기/쓰기 작업 수를 나타냅니다.
	- I/O 성능을 평가하는 데 중요한 지표입니다.
- **ReadLatency / WriteLatency**: 
	- 디스크 I/O 작업의 평균 소요 시간을 나타냅니다.
	- 높은 지연 시간은 성능 저하의 원인이 될 수 있습니다.
- **ReadThroughput / WriteThroughput**: 
	- 초당 디스크에서 읽거나 쓰는 바이트 수를 나타냅니다.
	- 데이터 전송량을 측정하는 데 사용됩니다.
- **DiskQueueDepth**: 
	- 디스크에서 대기 중인 I/O 작업의 수를 나타냅니다.
	- 높은 값은 I/O 병목 현상을 의미할 수 있습니다.
- **FreeStorageSpace**: 
	- 사용 가능한 스토리지 공간을 나타냅니다.
	- 스토리지 용량 계획에 중요한 지표입니다.



## 3 Enhanced Monitoring 소개

- Enhanced Monitoring은 RDS 인스턴스에 대한 더욱 상세한 모니터링을 제공합니다.
- 이 기능은 데이터베이스 인스턴스에 설치된 에이전트를 통해 메트릭을 수집합니다.
- Enhanced Monitoring은 기본 CloudWatch 메트릭보다 더 세분화된 정보를 제공합니다.



## 4 Enhanced Monitoring의 주요 특징

- **세부적인 CPU 사용량 분석**: 
	- 다양한 프로세스나 스레드별로 CPU 사용량을 확인할 수 있습니다.
	- 이를 통해 특정 데이터베이스 작업이 CPU에 미치는 영향을 정확히 파악할 수 있습니다.
- **50개 이상의 새로운 메트릭**: 
	- CPU, 메모리, 파일 시스템, 디스크 I/O 등에 대한 다양한 메트릭을 제공합니다.
	- 이를 통해 데이터베이스 성능에 대한 더욱 깊이 있는 인사이트를 얻을 수 있습니다.
- **높은 해상도의 모니터링**: 
	- 최소 1초 간격으로 메트릭을 수집할 수 있어, 매우 세밀한 성능 분석이 가능합니다.
- **운영 체제 수준의 가시성**: 
	- 데이터베이스 인스턴스의 운영 체제 레벨에서 발생하는 이벤트를 모니터링할 수 있습니다.



## 5 Enhanced Monitoring 활용 사례

- **성능 병목 현상 식별**: 
	- CPU, 메모리, I/O 등의 세부 메트릭을 통해 성능 병목 지점을 정확히 파악할 수 있습니다.
- **리소스 사용량 최적화**: 
	- 상세한 리소스 사용량 정보를 바탕으로 인스턴스 크기를 최적화할 수 있습니다.
- **문제 해결 시간 단축**: 
	- 고해상도 모니터링을 통해 일시적인 성능 문제도 놓치지 않고 빠르게 대응할 수 있습니다.
- **용량 계획**: 
	- 장기적인 리소스 사용 트렌드를 분석하여 미래의 용량 요구사항을 예측할 수 있습니다.



## 6 CloudWatch와 Enhanced Monitoring 비교

| 특징 | CloudWatch | Enhanced Monitoring |
|------|------------|----------------------|
| 데이터 소스 | 하이퍼바이저 | 인스턴스 내 에이전트 |
| 메트릭 수 | 제한적 | 50개 이상 |
| 수집 주기 | 최소 1분 | 최소 1초 |
| 세부 정보 | 기본적인 성능 지표 | 프로세스/스레드 수준의 상세 정보 |
| 설정 | 기본 활성화 | 별도 활성화 필요 |
| 비용 | 기본 요금에 포함 | 추가 비용 발생 |



## 7 결론

- RDS와 CloudWatch의 통합은 데이터베이스 관리자에게 강력한 모니터링 도구를 제공합니다.
- 기본 CloudWatch 메트릭만으로도 RDS 인스턴스의 전반적인 상태를 모니터링할 수 있습니다.
- 더욱 상세한 분석이 필요한 경우, Enhanced Monitoring을 활용하여 심층적인 성능 분석을 수행할 수 있습니다.
- 이 두 가지 모니터링 옵션을 적절히 조합하여 사용하면, RDS 인스턴스의 성능을 최적화하고 안정성을 높일 수 있습니다.
- 효과적인 데이터베이스 관리를 위해서는 이러한 모니터링 도구들을 적극적으로 활용하는 것이 중요합니다. 
## 1 ElastiCache

- AWS의 ElastiCache는 웹 애플리케이션의 속도를 향상시키기 위해 자주 사용되는 데이터를 메모리에 캐시하는 데 사용되는 완전 관리형 인 메모리 데이터 스토어 및 캐시 서비스다.
- Redis와 Memcached라는 두 가지 인기 있는 오픈 소스 인-메모리 캐싱 엔진을 지원합니다.
- 인-메모리 데이터 스토어 또는 캐시를 제공함으로써 ElastiCache는 디스크 기반 데이터베이스보다 빠른, 관리된, 인-메모리 캐시에서 정보를 검색할 수 있게 하여 웹 애플리케이션의 속도와 성능을 크게 향상시킵니다.
- 데이터베이스의 읽기 집중 워크로드에 대한 부하를 줄이는 데 도움이 됩니다.
- 애플리케이션을 무상태(stateless)로 만들 수 있도록 지원합니다.
- AWS는 운영 체제 유지 관리, 패치, 최적화, 설정, 구성, 모니터링, 장애 복구 및 백업을 처리해 줍니다.
- ElastiCache를 사용하는 경우 애플리케이션 코드의 많은 변경이 필요합니다.



### 1.1 ElastiCache의 주요 기능

- 완전 관리형 서비스: AWS가 캐시 환경의 관리, 모니터링 및 스케일링을 모두 처리하여 애플리케이션 개발에 집중할 수 있게 합니다.
- 높은 성능: 인-메모리 캐싱을 통해 마이크로초 응답 시간과 초당 수백만 요청을 처리할 수 있습니다.
- 확장성: 작은 캐시 클러스터에서 시작하여 애플리케이션의 요구가 증가함에 따라 스케일 업하거나 스케일 아웃할 수 있습니다.
- 가용성 및 신뢰성: 멀티 존 복제 및 자동 장애 전환 메커니즘을 통해 높은 가용성을 제공합니다.
- 보안: 이동 중 및 저장 중 암호화, VPC 통합 및 IAM 역할과 같은 강력한 보안 옵션을 제공합니다.



## 2 ElastiCache 엔진 선택하기

- ElastiCache는 두 가지 엔진, Redis와 Memcached를 지원하며, 각각 다른 사용 사례에 적합합니다



### 2.1 Redis

- **고가용성**: Redis는 자동 장애 조치를 통해 다중 AZ(가용성 영역) 배포를 지원하여 고가용성을 보장합니다. 이 기능을 사용하면 Redis는 기본 노드 오류가 발생할 경우 읽기 전용 복제본으로 자동 전환하여 가동 중지 시간을 최소화할 수 있습니다.
- **확장성**: 읽기 전용 복제본을 사용하여 읽기를 확장하고 가용성을 향상합니다. 이는 읽기 트래픽을 여러 인스턴스에 분산하여 처리량을 늘릴 수 있음을 의미합니다.
- **데이터 내구성**: Redis는 AOF(Append Only File) 지속성을 사용하여 데이터 내구성을 제공합니다. 즉, 데이터가 데이터베이스에 기록될 때마다 변경 사항이 기록되므로 오류가 발생하더라도 데이터가 손실되지 않습니다.
- **백업 및 복원**: 백업 및 복원 기능이 내장되어 있어 데이터를 쉽게 백업하고 필요할 때 복원할 수 있습니다. 이는 재해 복구 시나리오에 매우 중요합니다.
- **데이터 구조**: 세트 및 정렬된 세트를 포함한 복잡한 데이터 유형을 지원하므로 더 복잡한 애플리케이션과 데이터 조작이 가능합니다.
- 자세한 내용은 [[AWS/ElastiCache/Redis/Redis]] 참고



### 2.2 Memcached

- **샤딩**: 단순성과 속도를 위해 설계된 Memcached는 데이터 분할(샤딩)을 위한 다중 노드를 지원합니다. 샤딩은 데이터를 여러 노드에 분산하여 확장성과 성능을 향상시킵니다.
- **가용성**: 복제와 같은 고가용성 기능을 제공하지 않습니다. 즉, 노드가 다운되면 복원될 때까지 해당 노드의 캐시를 사용할 수 없게 됩니다.
- **지속성**: Memcached는 비영구적입니다. 즉, Memcached에 저장된 데이터는 디스크에 저장되지 않으며 캐시를 다시 시작하면 손실됩니다. 따라서 원본 데이터 소스에서 다시 생성하거나 다시 로드할 수 있는 중요하지 않은 데이터를 캐싱하는 데 적합합니다.
- **백업 및 복원**: 지속성이 주요 관심사가 아닌 임시 저장소라는 설계 철학을 반영하여 내장된 백업 및 복원 기능이 부족합니다.
- **아키텍처**: 다수의 동시 연결 및 요청을 효율적으로 처리할 수 있는 멀티스레드 아키텍처를 활용합니다. 따라서 Memcached는 데이터 복잡성이나 내구성보다 속도와 단순성이 더 중요한 시나리오에 특히 적합합니다.



### 2.3 선택 기준

- [레퍼런스](https://docs.aws.amazon.com/whitepapers/latest/scale-performance-elasticache/memcached-vs.-redis.html)



#### 2.3.1 Memcached 선택 시

- 주요 목표가 데이터베이스 부하 감소를 위한 객체 캐싱일 때
- 가능한 한 단순한 캐싱 모델이 필요할 때
- 대규모 캐시 노드와 멀티스레드 성능이 필요할 때
- 수평적 확장이 필요할 때



#### 2.3.2 Redis 선택 시

- 고급 데이터 타입(리스트, 해시, 비트 배열 등)이 필요할 때
- 인메모리 데이터 정렬 및 랭킹이 필요할 때
- 발행-구독(pub/sub) 기능이 필요할 때
- 키 저장소의 영속성이 중요할 때
- 다중 가용 영역(Multi-AZ) 및 페일오버가 필요할 때
- 지리공간 지원이 필요할 때
- 암호화 및 규정 준수(PCI DSS, HIPAA, FedRAMP 등)가 필요할 때



### 3 ElastiCache의 사용 사례

- **웹 세션 저장소**
    - 사용자가 애플리케이션에 로그인하면 세션 데이터가 ElastiCache에 저장됩니다. 이를 통해 사용자는 여러 애플리케이션 인스턴스에서 로그인을 유지할 수 있습니다.
    - 예를 들어, 사용자가 한 인스턴스에서 로그인한 후 다른 인스턴스에 접근할 때, ElastiCache에 저장된 세션 데이터로 인해 사용자는 다시 로그인할 필요가 없습니다.
    - 이는 사용자 경험을 향상시키고, 서버 간의 세션 데이터를 동기화할 필요가 없어 관리가 용이해집니다.
- **데이터베이스 캐싱**
    - 애플리케이션은 ElastiCache를 먼저 조회하고, 캐시에 데이터가 없으면 RDS와 같은 데이터베이스에서 데이터를 가져옵니다. 그런 다음 ElastiCache에 데이터를 저장하여 후속 요청 시 빠른 응답을 제공합니다.
    - 이를 통해 RDS의 부하를 줄이고 데이터베이스 성능을 최적화할 수 있습니다.
    - 주로 읽기 집중적인 워크로드에서 효율적이며, 데이터베이스 응답 시간을 줄여 사용자의 경험을 향상시킵니다.
- **실시간 분석**
    - ElastiCache는 실시간 분석 애플리케이션에서 중요한 데이터를 인-메모리에 저장하여 빠르게 접근할 수 있도록 합니다.
    - 이는 데이터가 실시간으로 갱신되며 빠른 처리 속도가 필요한 금융 거래나 IoT 데이터 수집과 같은 시나리오에 유용합니다.
- **게임 리더보드**
    - 실시간 리더보드를 필요로 하는 게임 애플리케이션에서는 ElastiCache를 사용하여 전 세계 플레이어의 점수를 빠르게 업데이트하고 조회할 수 있습니다.
    - 이는 게임 경험을 향상시키고, 대규모 사용자 트래픽을 효율적으로 처리할 수 있도록 합니다.
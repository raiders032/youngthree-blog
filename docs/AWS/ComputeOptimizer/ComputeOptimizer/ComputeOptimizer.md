## 1 AWS Compute Optimizer 소개

- AWS Compute Optimizer는 머신 러닝을 활용하여 AWS 리소스의 최적 구성을 추천해주는 서비스입니다.
- 워크로드의 사용 패턴을 분석하여 비용 절감과 성능 향상을 위한 최적의 AWS 리소스 구성을 제안합니다.
- 현재 EC2 인스턴스, EBS 볼륨, Lambda 함수, ECS 서비스의 최적화를 지원합니다.



## 2 주요 기능

### 2.1 리소스 분석

- 최소 14일간의 메트릭 데이터를 수집하여 리소스 사용 패턴을 분석합니다.
- CPU 사용률, 메모리 사용률, 네트워크 처리량 등 다양한 지표를 고려합니다.
- 머신 러닝 알고리즘을 사용하여 워크로드 패턴을 파악하고 예측합니다.



### 2.2 최적화 추천

- 분석된 데이터를 기반으로 다음과 같은 추천을 제공합니다:
	- 최적의 인스턴스 유형
	- EBS 볼륨 크기 및 유형
	- Lambda 함수의 메모리 구성
	- ECS 서비스의 컨테이너 크기



### 2.3 비용 절감 예측

- 각 추천 사항에 대한 예상 비용 절감액을 제공합니다.
- 현재 구성과 추천 구성의 비용을 비교하여 보여줍니다.
- 월별 예상 절감액을 확인할 수 있습니다.



## 3 지원되는 리소스 유형

### 3.1 EC2 인스턴스

- 다음과 같은 EC2 인스턴스 최적화를 지원합니다:
	- 인스턴스 유형 변경 추천
	- CPU 및 메모리 사용률 기반 분석
	- 네트워크 성능 요구사항 고려
	- 인스턴스 세대 간 마이그레이션 제안



### 3.2 EBS 볼륨

- EBS 볼륨에 대해 다음 사항을 분석합니다:
	- 볼륨 크기 최적화
	- 볼륨 유형 변경 추천
	- IOPS 및 처리량 요구사항 분석
	- 비용 효율적인 구성 제안



### 3.3 Lambda 함수

- Lambda 함수의 다음 측면을 최적화합니다:
  - 메모리 할당 크기
  - 타임아웃 설정
  - 실행 시간 분석
  - 비용 대비 성능 최적화



### 3.4 ECS 서비스

- ECS 서비스에 대해 다음을 분석합니다:
	- 컨테이너 인스턴스 크기
	- CPU 및 메모리 할당
	- 작업 정의 최적화
	- 리소스 활용도 개선



## 4 Compute Optimizer 설정

### 4.1 활성화 방법

**AWS Management Console을 통한 활성화**

```bash
1. AWS Management Console에 로그인
2. Compute Optimizer 콘솔로 이동
3. 'Get Started' 클릭
4. 계정 또는 조직 수준에서 옵트인 선택
```



### 4.2 권한 설정

**필요한 IAM 권한**

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "compute-optimizer:*",
                "ec2:DescribeInstances",
                "ec2:DescribeVolumes",
                "lambda:ListFunctions",
                "cloudwatch:GetMetricData"
            ],
            "Resource": "*"
        }
    ]
}
```



## 5 분석 및 추천 활용

### 5.1 대시보드 활용

- Compute Optimizer 대시보드는 다음 정보를 제공합니다:
	- 전체 리소스의 최적화 상태
	- 리소스 유형별 추천 사항
	- 예상 비용 절감액
	- 성능 개선 기회



### 5.2 추천 사항 확인

- 각 리소스 유형별로 다음과 같은 추천 정보를 확인할 수 있습니다:
  - 현재 구성과 추천 구성 비교
  - 예상 비용 절감액
  - 성능 지표 비교
  - 리소스 사용률 그래프



### 5.3 추천 사항 내보내기

**CSV 형식으로 내보내기**

```bash
aws compute-optimizer get-ec2-instance-recommendations \
    --output-format csv \
    --output recommendations.csv
```



## 6 모범 사례

### 6.1 정기적인 모니터링

- 최적화 추천 사항을 정기적으로 검토합니다:
	- 주간 또는 월간 검토 일정 수립
	- 중요 워크로드에 대한 우선순위 지정
	- 비용 절감 기회 파악
	- 성능 개선 포인트 식별



### 6.2 점진적 적용

- 추천 사항 적용 시 다음 단계를 따릅니다:
	- 테스트 환경에서 먼저 변경 적용
	- 작은 규모부터 시작하여 점진적 확대
	- 변경 후 성능 모니터링
	- 롤백 계획 수립



### 6.3 자동화 구현

**AWS CLI를 활용한 자동화 스크립트 예시**

```bash
#!/bin/bash
## 최적화 추천 사항 조회 및 적용
aws compute-optimizer get-ec2-instance-recommendations \
    --filters '{"Finding":["OVER_PROVISIONED"]}' \
    --query 'instanceRecommendations[*].[instanceArn,recommendationOptions[0].instanceType]' \
    --output text
```



## 7 고급 기능

### 7.1 Enhanced Infrastructure Metrics

- 더 세밀한 분석을 위한 추가 메트릭을 활성화할 수 있습니다:
	- 메모리 활용률
	- 디스크 IOPS
	- 네트워크 처리량
	- 프로세스별 CPU 사용률



### 7.2 룩백 기간 설정

- 분석 기간을 설정할 수 있습니다:
	- 기본 14일
	- 최대 93일까지 확장 가능
	- 더 긴 기간의 데이터로 더 정확한 분석 가능



## 8 비용 최적화 전략

### 8.1 우선순위 설정

- 최적화 작업의 우선순위를 다음과 같이 설정합니다:
	- 비용 영향도가 큰 리소스
	- 성능 개선이 시급한 워크로드
	- 구현이 용이한 변경사항
	- 리스크가 낮은 변경사항



### 8.2 ROI 분석

- 각 최적화 작업의 ROI를 분석합니다:
	- 예상 비용 절감액 계산
	- 구현 비용 및 노력 평가
	- 리스크 대비 이익 분석
	- 우선순위 조정



## 9 문제 해결

### 9.1 일반적인 문제

- 자주 발생하는 문제와 해결 방법:
	- 데이터 수집 지연
	- 권한 설정 오류
	- 메트릭 데이터 부족
	- 추천 사항 부재



### 9.2 트러블슈팅 가이드

- 문제 해결을 위한 단계별 접근:
	- 로그 확인
	- 권한 검증
	- 메트릭 데이터 확인
	- AWS 지원 문의



## 10 결론

- AWS Compute Optimizer는 강력한 최적화 도구입니다.
- 머신 러닝을 활용한 정확한 분석을 제공합니다.
- 비용 절감과 성능 향상을 동시에 달성할 수 있습니다.
- 지속적인 모니터링과 최적화가 중요합니다.
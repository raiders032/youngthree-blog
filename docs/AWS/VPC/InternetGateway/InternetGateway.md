## 1 AWS 인터넷 게이트웨이 (Internet Gateway)

- AWS 인터넷 게이트웨이(IGW)는 Amazon VPC의 핵심 구성 요소 중 하나입니다.
- 인터넷 게이트웨이는 VPC와 인터넷 사이의 통신을 가능하게 하는 게이트웨이입니다.
- 이 서비스는 VPC 내의 리소스가 인터넷과 통신할 수 있도록 하며, 인터넷에서 VPC 내의 리소스로의 접근도 가능하게 합니다.



## 2 인터넷 게이트웨이의 주요 기능

### 2.1 인터넷 연결 제공

- 인터넷 게이트웨이는 VPC 내의 리소스가 인터넷에 접근할 수 있도록 합니다.
- 이를 통해 EC2 인스턴스, RDS 데이터베이스 등이 인터넷을 통해 데이터를 주고받을 수 있습니다.



### 2.2 NAT (Network Address Translation) 수행

- 인터넷 게이트웨이는 VPC 내부의 프라이빗 IP 주소와 퍼블릭 IP 주소 간의 변환을 수행합니다.
- 이를 통해 프라이빗 IP를 가진 리소스도 인터넷과 통신할 수 있게 됩니다.



### 2.3 라우팅 지원

- 인터넷 게이트웨이는 VPC의 라우팅 테이블과 연동하여 트래픽을 적절히 라우팅합니다.
- VPC 외부로 향하는 트래픽을 인터넷으로 라우팅하고, 인터넷에서 오는 트래픽을 VPC 내부로 라우팅합니다.



## 3 인터넷 게이트웨이의 특징

### 3.1 고가용성

- 인터넷 게이트웨이는 AWS에 의해 관리되며, 고가용성을 갖추고 있습니다.
- 단일 장애 지점이 없어 안정적인 인터넷 연결을 제공합니다.



### 3.2 수평적 확장

- 인터넷 게이트웨이는 자동으로 수평 확장되어 증가하는 트래픽을 처리할 수 있습니다.
- 사용자가 별도로 용량을 관리할 필요가 없습니다.



### 3.3 보안

- 인터넷 게이트웨이 자체는 보안 기능을 제공하지 않습니다.
- 하지만 보안 그룹, 네트워크 ACL 등과 함께 사용하여 VPC의 보안을 강화할 수 있습니다.



### 3.4 비용

- 인터넷 게이트웨이 자체에 대한 사용 비용은 없습니다.
- 하지만 데이터 전송량에 따라 비용이 발생할 수 있습니다.



## 4 인터넷 게이트웨이 설정 및 사용

### 4.1 인터넷 게이트웨이 생성

1. AWS Management Console에 로그인합니다.
2. VPC 대시보드로 이동합니다.
3. 왼쪽 메뉴에서 "인터넷 게이트웨이"를 선택합니다.
4. "인터넷 게이트웨이 생성" 버튼을 클릭합니다.
5. 이름 태그를 입력하고 "생성" 버튼을 클릭합니다.



### 4.2 VPC에 인터넷 게이트웨이 연결

1. 생성된 인터넷 게이트웨이를 선택합니다.
2. "작업" 드롭다운 메뉴에서 "VPC에 연결"을 선택합니다.
3. 연결할 VPC를 선택하고 "연결" 버튼을 클릭합니다.



### 4.3 라우팅 테이블 설정

1. VPC 대시보드에서 "라우팅 테이블"을 선택합니다.
2. 인터넷 게이트웨이를 사용할 라우팅 테이블을 선택합니다.
3. "라우팅" 탭에서 "라우팅 편집"을 클릭합니다.
4. "라우팅 추가"를 클릭하고 다음과 같이 설정합니다:
   - 대상: 0.0.0.0/0 (모든 IPv4 트래픽)
   - 대상: 인터넷 게이트웨이 ID 선택
5. "변경 사항 저장"을 클릭합니다.



## 5 인터넷 게이트웨이 사용 시 고려사항

### 5.1 보안

- 인터넷 게이트웨이를 통해 VPC가 인터넷에 노출되므로, 적절한 보안 조치가 필요합니다.
- 보안 그룹과 네트워크 ACL을 사용하여 인바운드 및 아웃바운드 트래픽을 제어해야 합니다.
- 가능한 경우 프라이빗 서브넷을 사용하고, 필요한 리소스만 퍼블릭 서브넷에 배치하는 것이 좋습니다.



### 5.2 비용 관리

- 데이터 전송량에 따라 비용이 발생할 수 있으므로, 트래픽을 모니터링하고 관리해야 합니다.
- 불필요한 아웃바운드 트래픽을 최소화하여 비용을 절감할 수 있습니다.



### 5.3 IPv6 지원

- 인터넷 게이트웨이는 IPv4와 IPv6 트래픽을 모두 지원합니다.
- IPv6를 사용하려면 VPC와 서브넷에 IPv6 CIDR 블록을 할당해야 합니다.



## 6 이그레스 온리 인터넷 게이트웨이 (Egress-Only Internet Gateway)

- 이그레스 온리 인터넷 게이트웨이(EIGW)는 IPv6 트래픽에 대해 아웃바운드 인터넷 접근만을 허용하는 VPC 구성 요소입니다.
- IPv6를 사용하는 VPC 내의 인스턴스가 인터넷에 접근할 수 있게 하면서, 인터넷으로부터의 원치 않는 인바운드 연결을 방지합니다.



### 6.1 주요 특징

- IPv6 트래픽만을 지원합니다.
- 상태 저장(Stateful) 방식으로 동작합니다.
- 수평적으로 확장되며 가용성이 높습니다.
- VPC당 하나의 이그레스 온리 인터넷 게이트웨이만 연결할 수 있습니다.
- 사용 자체에 대한 추가 비용은 없으며, 데이터 전송량에 따라 비용이 발생합니다.




### 6.2 사용 시나리오

- IPv6를 사용하는 프라이빗 서브넷의 인스턴스가 인터넷에 접근해야 하는 경우
- 아웃바운드 인터넷 접근은 필요하지만, 인바운드 접근은 차단해야 하는 경우



### 6.3 설정 방법

1. VPC 대시보드에서 "이그레스 전용 인터넷 게이트웨이" 섹션으로 이동합니다.
2. "이그레스 전용 인터넷 게이트웨이 생성" 버튼을 클릭합니다.
3. 연결할 VPC를 선택하고 생성합니다.
4. 라우팅 테이블에 이그레스 온리 인터넷 게이트웨이를 통한 IPv6 트래픽 라우팅 규칙을 추가합니다.



## 7 인터넷 게이트웨이, 이그레스 온리 인터넷 게이트웨이, NAT 게이트웨이 비교

| 특성 | 인터넷 게이트웨이 | 이그레스 온리 인터넷 게이트웨이 | NAT 게이트웨이 |
|------|-------------------|----------------------------------|----------------|
| 지원 프로토콜 | IPv4 및 IPv6 | IPv6만 | IPv4만 |
| 트래픽 방향 | 양방향 (인바운드 및 아웃바운드) | 아웃바운드만 | 아웃바운드만 |
| 사용 위치 | 퍼블릭 서브넷 | 프라이빗 서브넷 (IPv6) | 프라이빗 서브넷 (IPv4) |
| 관리 | AWS 관리 | AWS 관리 | AWS 관리 |
| 확장성 | 자동 확장 | 자동 확장 | 자동 확장 (최대 100Gbps) |
| 가용성 | 고가용성 | 고가용성 | 단일 AZ, 다중 AZ 구성 가능 |
| 비용 | 무료 (데이터 전송료만 부과) | 무료 (데이터 전송료만 부과) | 시간당 사용료 + 데이터 처리 비용 |
| 보안 그룹 | 불필요 | 불필요 | 불필요 |

### 7.1 주요 차이점

- **용도**:
    - 인터넷 게이트웨이: 퍼블릭 서브넷의 리소스를 인터넷에 직접 연결
    - 이그레스 온리 인터넷 게이트웨이: IPv6를 사용하는 프라이빗 서브넷의 아웃바운드 연결만 허용
    - NAT 게이트웨이: IPv4를 사용하는 프라이빗 서브넷의 아웃바운드 연결만 허용
- **IP 프로토콜 지원**:
    - 인터넷 게이트웨이는 IPv4와 IPv6를 모두 지원
    - 이그레스 온리 인터넷 게이트웨이는 IPv6만 지원
    - NAT 게이트웨이는 IPv4만 지원
- **트래픽 방향**:
    - 인터넷 게이트웨이는 인바운드와 아웃바운드 트래픽을 모두 허용
    - 이그레스 온리 인터넷 게이트웨이와 NAT 게이트웨이는 아웃바운드 트래픽만 허용
- **비용 구조**:
    - 인터넷 게이트웨이와 이그레스 온리 인터넷 게이트웨이는 사용 자체에 대한 비용이 없음
    - NAT 게이트웨이는 시간당 사용료와 데이터 처리 비용이 발생
- **가용성**:
    - 인터넷 게이트웨이와 이그레스 온리 인터넷 게이트웨이는 기본적으로 고가용성 제공
    - NAT 게이트웨이는 단일 AZ에 생성되지만, 다중 AZ 구성을 통해 고가용성 확보 가능